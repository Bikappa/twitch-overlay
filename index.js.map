{"version":3,"file":"index.js","sources":["../src/components/FollowerBadge.tsx","../src/components/Overlay.tsx"],"sourcesContent":["import React from 'react'\r\nimport { createUseStyles } from 'react-jss'\r\n\r\nconst useStyles = createUseStyles({\r\n    root: {\r\n        backgroundColor: '#223322',\r\n        padding: '20px',\r\n        width: '400px',\r\n        height: '400px',\r\n        clipPath: 'polygon(0% 0%, 100% 0, 100% 76%, 49% 100%, 0 76%)',\r\n        boxSizing: 'border-box'\r\n    },\r\n    innerBorder: {\r\n        backgroundColor: '#CCFF00',\r\n        padding: '6px',\r\n        width: '360px',\r\n        height: '360px',\r\n        clipPath: 'polygon(0% 0%, 100% 0, 100% 76%, 49% 100%, 0 76%)',\r\n        boxSizing: 'border-box',\r\n    },\r\n    inner: {\r\n        backgroundColor: '#223322',\r\n        padding: '20px',\r\n        width: '348px',\r\n        height: '348px',\r\n        boxSizing: 'border-box',\r\n        clipPath: 'polygon(0% 0%, 100% 0, 100% 76%, 49% 100%, 0 76%)',\r\n        textAlign: 'center',\r\n        color: 'white',\r\n\r\n    },\r\n    nickname: {\r\n        textTransform: 'uppercase'\r\n    }\r\n})\r\n\r\nexport type FollowerBadgeProps = {\r\n    nickname: string\r\n}\r\n\r\nexport function FollowerBadge({ nickname }: FollowerBadgeProps) {\r\n\r\n    const styles = useStyles()\r\n\r\n\r\n    return (\r\n        <div className={styles.root}>\r\n            <div className={styles.innerBorder}>\r\n                <div className={styles.inner}>\r\n                    <span>Nuovo follower</span>\r\n                    <h2 className={styles.nickname}>{nickname}</h2>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\nimport { FollowerBadge } from './FollowerBadge'\nimport './Overlay.css'\n\ntype ChatEvent = {\n  name: string\n}\n\ntype Listener = 'follower'\n\ntype StreamEvent = {\n  detail: {\n    listener: string\n    event: ChatEvent\n  }\n}\n\nexport const Overlay = () => {\n  const [newFollower, setNewFollower] = useState<string | undefined>(undefined)\n  const handlers = {\n    follower: (event: ChatEvent) => {\n      setNewFollower(event.name)\n    }\n  }\n\n  useEffect(() => {\n    const chatEventHandler = (e: any) => {\n      const obj = e as StreamEvent\n      if (!obj.detail.event) {\n        return\n      }\n      const [listener] = obj.detail.listener.split('-')\n      const event = obj.detail.event\n\n      const handler = handlers[listener as Listener]\n      if (handler) {\n        handler(event)\n      }\n    }\n\n    window.addEventListener('onEventReceived', chatEventHandler)\n    return () => {\n      window.removeEventListener('onEventReceived', chatEventHandler)\n    }\n  })\n\n  useEffect(() => {\n    if (!newFollower) {\n      return\n    }\n    const timeout = setTimeout(() => setNewFollower(undefined), 2500)\n    return () => {\n      clearTimeout(timeout)\n    }\n  }, [newFollower])\n\n  return (\n    <div>\n      <span>Follower</span>\n      {newFollower ? <FollowerBadge nickname={newFollower} /> : null}\n    </div>\n  )\n}\n"],"names":["useStyles","createUseStyles","root","backgroundColor","padding","width","height","clipPath","boxSizing","innerBorder","inner","textAlign","color","nickname","textTransform","FollowerBadge","styles","React","className","Overlay","useState","undefined","newFollower","setNewFollower","handlers","follower","event","name","useEffect","chatEventHandler","e","obj","detail","listener","split","handler","window","addEventListener","removeEventListener","timeout","setTimeout","clearTimeout"],"mappings":"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"}